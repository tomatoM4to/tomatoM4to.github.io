# Interconnected ASes
내부에 있으면서 외부와 연결된 엣지 라우터의 존재

내부에서 내부부부에서 정보를 보낼라면 인트라 도메인도 충푼하지만

외부에 있는곳에 보낼려면 AS1 -> AS2 로 보낼려면 AS2의 2a에 보내야 한다는것을 내내부에 있는 라우터에게 알려려줘야 한다.

***

# Intra-AS routing
1. RIP
2. EIGRP
3. OSPF

이 세개가 대표적인 알고리즘이였음

EIGRP는 디스턴스 벡터 기반반임

OSPF는 link state routing 알고리즘이고 IEEE 표준임

학교는 OSPF를 씀, 평상시엔 트래픽이 널럴하니까(수강신청 제외)

결론적으로 Intra에선 OSPF를 가장 많이 씀

***

# 계층적인 OSPF
그럼에도 계층적으로 운영함?

라우팅 테이블 돌리는 이유는 포워딩 테이블을 만들기 위함임 결국

동그라미 돼어 있는 애들끼리만 엔타이어 정보, 코스 정보를 알려주면 됌

이때 코스스는 딜레이, band width 중 선택할 수 있음

최근 OSPF는 기본적인 인증된 사용자한테 온 정본지에 관한 악의적인 침임을 막기 위해 인증 매커니즘이 다 들어가 있음

 학교 건물엔 층마다 라우터가 있고 OSPF를 쓴다.

***
# Inter routing among ISPs: BGP
BGP가 대새임, 인터넷과 딱붙어 동작작을 하게 됀다.

학교 DNS는 안안동작해도 학교만 답답하지 상위 DNS가 안돌면 전세계가 패닉에 빠질것

### ebgp


### iBGP

### BGP basis
TCP 씀, 네비가 주기적으로 계산해서 알려주듯(카카오는 3분이라 함함

그리고 TCP를 거거의 반 영구적적으로 열어놓고 있다 함


### BGP message
* OPEN: 나 인증됀 사용자야
* UPDATE
* KEEPALIVE: UPDATE가 너무 안오면 나 아직 살아있으니 아직 TCP 커낵션 닫지마 라고 보내는것
* NOTIFICATION: 에러가 발생하거나 닫아야할 때

***

# BGP
기본적으로 TCP다.

BGP 메세지 포맷은 책책에 안나와와있있긴 함, ppt에도

## BGP path advertisement
쉽게말해 업업데이트를 받는것

결국 각 라우터들이 얻는건 포워워딩 테이블

***

# Hot potato routing
방향보다 지금 당장 빠르게 처리하는 라우팅 기법임, 예를들어 AS3로 갈려면 1c로 가야하는데 그냥 빠르게 처리하는데 집중하고 아무데나 라우팅 함

2a로도 갈수있고 2c로 갈수있지만, inter-domain cost는 신경 안쓰고 2c로 가야할걸 2a로 보냄

결과적으로 시간이 더 오래걸걸릴 수 있음


