---
title: "Docker 를 이해하기 위한 핵심 요소"
description: "Docker의 핵심인 Image, Container, Volume, Dockerfile 등의 기본 개념과 용어를 정리합니다."
date: "2025-05-26"
keywords: "Docker"
---

# Docker 의 핵심 요소들

Docker 를 시작하기 전 알아야할 핵심 개념들과 용어들을 미리 정리해 보자.

1. Container
2. Image
3. Volume
4. Dockerfile
5. docker-compose
6. K8s (Kubernetes)
7. Docker Hub
8. Docker Desktop

> 5번 이후는 Docker 자체보단 주변 생태계에 관한 내용이다.

## Container

[이전](https://tomatom4to.github.io/posts/Docker%20%EC%9D%98%20%EB%93%B1%EC%9E%A5%20%EB%B0%B0%EA%B2%BD) 에 설명했듯 컨테이너는 Linux 커널의 네임스페이스 (Namespace) 와 cgroups 기능을 활용하여, 격리된 프로세스 실행 환경을 제공하는 기술이다.

프로세스를 계속 강조하지만 컨테이너를 실제로 사용해보면 마치 별도의 OS 가 실행되는것처럼 느껴진다.

실제로 컨테이너는 다음과 같은 기능을 제공한다.
1. 컨테이너 내부에 새로운 프로세스를 실행 (기술적으론 Namespaces 를 이용해 새 프로세스를 조인(join) 하는 것)
2. 컨테이너는 자신만의 IP주소, 라우팅 테이블, 포트 번호를 가짐
3. 컨테이너는 자신만의 루트 파일 시스템을 가지고 있음


## Image

이미지 란 컨테이너 를 생성하기 위한 템플릿으로, 애플리케이션 실행에 필요한 파일 시스템, 라이버르리, 환경 설정 등을 하나로 압축해놓은 **Read-Only** 데이터 뭉치라고 이해하면 된다.

그렇다고 해서 `.jpg`, `.png` 같은 일반적인 이미지 파일과는 전혀 관련이 없다.

기술적으로 이미지는 여러개의 레이서(Layer) 가 겹겹이 쌓인 구조로 이루어져 있으며, 각 레이어는 다음과 같은 정보를 담고 있다.
1. **베이스 이미지**: Ubuntu, Alpine, CentOS 등 어떤 기반 OS를 사용하는지
2. **런타임 및 라이브러리**: 소스 코드 실행에 필요한 환경 (Node.js, Python 등)
3. **환경 변수**: `ENV`, `WORKDIR` 등 실행 시 참조할 메타데이터
4. **애플리케이션 소스 코드**: 실제로 실행될 프로그램
5. **기본 명령어(CMD)**: 컨테이너 시작시 자동으로 실행될 프로세스 정의

이러한 컨테이너가 실행될 때, Docker 는 이미지 레이어 위에 **읽기/쓰기 가능한 Writable-Layer**를 추가하여, 컨테이너 내부에서 발생하는 모든 변경 사항을 이 레이어에 기록한다.

덕분에 한 이미지에서 여러 컨테이너를 독립적으로 실행할 수 있다.

예를 들어, PostgreSQL 의 공식 이미지 를 사용하면, 해당 **이미지 를 기반으로 여러 개의 독립적인 PostgreSQL 컨테이너 를 만들 수 있**다.


## Volume

컨테이너는 기본적으로 삭제하면 그 안에서 변경된 데이터도 함께 사라진다. 그래서 영구적인 데이터를 저장하기엔 다소 적합한 방식이 아니다.

Docker 는 이 문제를 보안하기 위해 **Volume** 이라는 기능들 제공한다.

Volume은 **호스트 머신의 디렉터리 또는 파일을 컨테이너와 공유하는 방식**으로, 컨테이너 를 재시작하거나 재생성해도 데이터는 그대로 유지된다. 여러 개의 컨테이너가 하나의 볼륨을 공유할 수도 있다.

대표적인 Volume 사용 예시
* PostgreSQL, MySQL 등 DB 컨테이너의 실제 데이터를 유실하지 않기 위해 사용
* 애플리케이션이 생성하는 로그 파일이나 사용자가 업로드한 이미지를 호스트 서버에 안전하게 저장


## Dockerfile

**도커파일은 이미지를 어떻게 생성할지 정의한 설정 파일**이다. 기존 이미지에 추가적인 레이어를 쌓아 올리는 방식으로 새로운 이미지를 생성할 수 있다.

덕분에 중복을 최소화 하고 효율적으로 이미지를 관리할 수 있다.

예를 들어, `Python 베이스 이미지 사용 → FastAPI 설치 → 소스 코드 복사 → 8000번 포트 개방 → 실행` 이라는 일련의 과정을 Dockerfile에 기술하면, 누구나 동일한 환경의 이미지를 빌드할 수 있다.

Dockerfile과 이미지의 관계는 다음과 같다.

* Dockerfile은 이미지를 만들기 위한 스크립트
* 이미지는 Dockerfile을 기반으로 생성된 실행 가능한 결과물

보통 Dockerfile은 GitHub 등에서 코드와 함께 공유되고, 완성된 이미지는 Docker Hub 같은 이미지 레지스트리에 업로드되어 사용된다.

여기까지가 Docker 사용에 대한 핵심 개념이고, 아래 그림은 전체적인 관계를 요약한 것이다.

![Docker 개념도](/img/Docker/docker-overview.webp)

1. Dockerfile 을 작성
2. `docker build` 명령어로 이미지를 생성
3. `docker run` 명령어로 컨테이너 실행
4. 필요에 따라 Volume 을 마운트하여 데이터 영구 저장

## docker-compose

실제 서비스 환경에서는 여러 개의 컨테이너가 협력하여 동작하는 경우가 많다. 예를 들어, 웹 서버 컨테이너, 데이터베이스 컨테이너, 캐시 컨테이너 등이 함께 작동하는 구조다.

이렇게 한 시스템 내에서 여러 컨테이너를 정의하고 관리하기 위해 **docker-compose** 라는 도구가 사용된다.

docker-compose 는 여러 컨테이너의 설정을 하나의 YAML 파일(`docker-compose.yml`)에 정의할 수 있게 해준다. 이 파일에는 각 컨테이너의 이미지, 환경 변수, 네트워크 설정, 볼륨 마운트 등을 기술할 수 있다.

또 Docker 의 길고 복잡한 명령어를 자동화 할수 있는 장점도 있다.

> Docker Desktop 엔 docker-compose 가 기본 포함되어 있다. Linux 에서 Docker 만 설치했다면 별도 설치가 필요하다.

## K8s (Kubernetes)

Kubernetes(쿠버네티스, 줄여서 K8s)는 컨테이너화된 애플리케이션의 배포, 확장 및 관리를 자동화하는 오픈소스 플랫폼이다. 구글이 개발했으며, 현재는 CNCF(Cloud Native Computing Foundation)에서 관리하고 있다.

Docker 가 단일 호스트에서 컨테이너를 관리하는 데 중점을 둔 반면, K8s 는 **여러 호스트**에 걸쳐 대규모로 컨테이너를 오케스트레이션하는 데 사용된다.

> 구글은 한주동안 20억개의 리눅스 컨테이너를 배포했다고 한다.

## Docker Hub

Docker Hub 는 Docker 이미지의 공식 저장소로, 개발자들이 자신이 만든 이미지를 공유하고 배포할 수 있는 플랫폼이다. Docker Hub 에는 수많은 공개 이미지가 있으며, 공식 이미지(예: Ubuntu, Nginx, PostgreSQL 등)도 제공된다.

## Docker Desktop

Docker Desktop 은 Windows 및 macOS 환경에서 Docker 를 쉽게 설치하고 관리할 수 있도록 도와주는 애플리케이션이다. GUI 기반의 대시보드를 제공하여, 컨테이너, 이미지, 볼륨 등을 시각적으로 관리할 수 있다.

Window 나 MacOS 에서 Docker 를 설치하고 사용하기 위해선 Docker Desktop 을 설치하는 것이 일반적이다.
