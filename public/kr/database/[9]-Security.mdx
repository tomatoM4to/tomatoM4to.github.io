DBA의 대표적인것이 보안, 백업 이라 할수 있음

사실 45시간 가지고는 택도 없음, 교수도 관리의 모든부분을 다 파악하지 못함, DBMS마다 다르고 회사마다 다름, 업계에서 10년정돈 굴러야 쓸만한 사람이라 할수 있음, 너무 광범위함, 그래서 다루는게 거의 무의미 하기도..

큰 회사는 DB서버를 독자적으로 운영하는 경우가 많음, 스타트업 같은 경우는 그런경우까진..?

큰회사라 함은, 정부, 은행 같은.. 당연히 엄청나게 잘 알아야 함

이책에선 백업과 복원, 사용자 관리, 저장 공간 관리 정도 다루도록 함


***

# 사용자 관리
먼저 로그인 부터 다룸, 사실 DBMS마다 달라서 그때마다 문서보고 해야함, 이 책에서 달는것도 시간이 지나면 안될수도 있음, Container DB(CDB) 오라클 12c  버전부터 multi tenant 구조 사용? 근데 Mysql은 또 다름

CDB는 그냥 껍데기, ROOT는 공통된 부분만 다룸? 시스템 사용자는 사실 CDB를 관리하는 사람임, 이전까지 PDB는 쓰지 않음?

MySQl이 관리가 훨씬 쉬운편

버전이 바뀌면 없어질수도 있는 구조임

## 접근 권한
당연히 처음은 로그인 부터 함, 처음 초기엔 System 계정만 존재? 그 이후 권한 확인을 하고 CDB에 갈지 PDB에 갈지 선택 가능, 허용이 돼지 않는한 인가된 PDB 에서ㅓ만 작업 가능

각각의 PDB에서도 시스템 계정을만들수 있음

계정을 만드는건 시스템 계정만 가능

```sql
CREATE TABLESPACE
```

TABLESPACE 는 RDBMS 의 공통적인 기능임, TABLESPACE 가 뭐냐? 오라클을 설치했으면 오라클 설치 디렉토리를 쭉 따라가다 특정 폴더를 가면 .dbf 라는 파일이 있음, RDBMS 들은 TABLE 들을 관리하기 위해 TABLESPACE 로 관리함, 그냥 아주 큰 공백 파일임, xxx.dbf 라는 형식으로 도어 있고 이 파일엗 모든것을 관리 함

| | | | |
|-|-|-|-|
|a|a|b| |

밖에선 안보임

DATAFILE 는 이런 폴더믿에 해당 이름으로 만들라는 거임

SIZE 10M; 는 처음 크기를 10MB 로 만들라는 거임, 이러면 10MB 의 공백 파일이 생김

필요하면 TABLESPACE 를 만들어 쓸수도 있음

잘 생성된지 확인할라면 SELECT * FROM ----; 하면 됨, 결국 뭐냐, 테이블이다 라는거임, Rdbms 는 모든 데이터를 테이블로 관리 함

주목해볼만한 TABLESPACE 는 SYSTEM 임, 이것도 찾다찾다 보면 결국 파일임, 시스템이 만든 tablespace 임

중요한건 USERS, 유저 데이터 베이스들이 들어감, 아무런 테이블 스페이스를 지정하지 않으면 여기로 들어감? 지금까진 USeRs 를 썻다 라는거임

중요한건 여 모든것들이 파일 하나하낭 연결 되어 있단 것

물론 삭제도 가능 하긴 함

***

# 사용자 관리
## 사용자 생성
```sql

```
이게 오래된 오라클의 문제점, 코드만 얻으면 비밀번호가 다 보임, MySQL 같은 경우는 방법이 있는데.. * 로 보인다든지

## 변경
이또한 좋은방법이 아님, 기존 비밀번호 물어보지도 않고 그냥 가능..

***

지금까지 로그인 확인 까지 한거임

# 권한 관리
시스템 계정이라도 처음 만들면 아무런 권한을 부여하지 않기 때문에 로그인이 불가, 세션이 없음, 계정과 DBMS가 연결하는 통로인 세션을 만들수 있는 권한이 없기 때문에 연결이 안됨

그래서 각종 권한을 부여 해야함

권한을 부여하는 명령어는 `grant` 임

당연히 날 만들어준 시스템 계정 밖에 하지 못함

`ROlE` 는 권한의 묶음

`UNLIMITED TABLESPACE` 테이블 스페이스의 공간을 한계 없이 사용 가능

TODO: 19

DCL 명령어는 2가지밖에 없음, 소윻 개체라면 대표적으로 TABLE 이 있음

오라클은 마지막에 언락해야 한다고 함, 다른 Dbms 는 안그럴수도 있음

REVOKE 하면 연쇄적으로 빼앗을수 있음

***

# 권한 관리
명령어 두개밖에 없음 `GRANT`, `REVOKE`

시스템 권한을 가진 시스템 계정이 다른 사용자 계정에게 권한을 부여 하는것

ANY 가 들어간 이유: 자기가 만든건 고칠수 있음, 내가 만든게 아니라 다른사람 말하는거

시스템 계정은 당연하게 가지는 권한

## 사용자 =) 다른 사용자 계정
자기가 생성한 테이블 같은거에 대한 권한?

자신이 소유한 객체, 사실상 테이블에 관해서 다른 사용자에게 권한을 부여할 수 있음


## Revoke
일반 사용자가 받은 권한을 또다른 사용자에게 전파는 기본적으로 불가능 하지만, `with grant option` 를 하면 전달 가능, 참고로 권한 해제 권한은 준사람에게 있음

이때 s - m1 - m2 일때 m1 의 권한만 가져가도 m2 권한도 CASCADE 됨

`madang.Book` 해야 인식은 됨, 이후엔 권한 문제

## Role
권한 관리가 힘들어서 생김

`CREATE ANY TABLE` 권한이 있기 때무네 아무 사용자 계정에 테이블을 만들수 있음

근데 INSERT 권한이 없어서 INSERT 는 하지 못하는걸 볼 수 있음

DBMS 마다 다르긴 한데 CREATE ROLE 부여해도 바로 적용 안될수도 있음

이정도가 사용자 관리 끝

***

# 복원
트랜잭션의 Recovery 가 아님

DB를 복사하여 보관하는 작업

장애가 발생하면 원래대로 되돌려 놓는 작업

장애가 뭘까? 이전 트랜잭션에서 다 설명 함

필수적인 사항

## 백엉븨 종류
간단히 3가지 있음

보통 백업은 하루단위, 20일 단위로 수행

### 전체 백업
첫번째 백업은 10, 두번째 백업은 10, 20, 세번째 백업은 10, 20, 30?

### 차등 백어
10 백업,20백업 20과 30의 백업

초기 상태만 빼고 전부 백업임

새번째에 장애가 발생하면 원본 복구 마지막 복구 함으로써 10, 20, 30 이 됨, 원본은 백업하지 않음

조금 양이 줄어듬

### 증분백업, 로그 백업
진째 말그대로 증가된 것만
10만, 20만, 30만 백업, 로그에 다 있기 때문에 로그를 보고 백업 함

원본 10에다가 히스토리를 기반으로 쭉 올라감

그래ㅓ 리커버리에 시간이 많이 듬

그래서 전체, 차등 백업 많이 씀

로그는 기본적으로 안전하다가정 ㅏ기 때문에 백업에 대한 비용은 적을수 있음

근데 사실 결국 DBMS 마다 다르긴 함, 물리적으로 디스크를 백업할 수도 있음

핫백업: 시스템이 느려짐

콜드백업: 큰일나서 아예 멈춤

다 나름임

논리적 백업도 있음

이로서 기본적인 운영은 가능할것