# Thread 의미

Process 와 Program 에 대한 차이는 이전부터 계속 이야기 함

Process 는 실행중인 프로그램으로 CPU 에 의해 실행되는 상태

이때 Thread 는 Process 내에서 실행되는 실행 단위 라고 할 수 있음

쉽게 생각하면 `main` 함수를 생각해볼수 있음

쉽게 생각해 `main` 함수의 중괄호 안에 있는 코드의 시작점부터 끝점 까지의 실행 흐름이란 thread 가 있고 CPU 는 이러한 thread 를 실행하는 역할을 한다고 볼 수 있음

혹은 이렇게 생각해 볼 수도 있음, 어떤 함수를 실행한다 해보면 `print` 같은, 이때 CPU 가 실제로 실행하는건 기계어 단위로 실행할 거임, 함수 하나라도 여러개의 기계어를 실행하게 됨, 이때 기계어를 묶음으로 묶어서 실행하는 단위를 thread 라고 볼 수 있음

이렇듯 thread 는 CPU 가 실행하는 실행 단위로, 기계적으로 보면 기계어의 묶음이라 볼 수도 있지만, 우리가 일반적으로 사용하는 프로그래밍의 관점으로 보면, 추상화가 잘 되어있기 때문에 함수를 실행하는 단위처럼 볼 수도 있을거임

# Thread 작동 원리

지금까지 thread 를 사용하지 않았다면 보통 `main` 함수 하나만 사용했었을 거임, 이건 단일 스레드로 동작하는 프로그램이라고 할 수 있음

반대로 멀티 스레드를 사용하는 프로그램은 이러한 작업흐름을 여러개로 나누어서 동시에 실행하는 프로그램이라고 할 수 있음, 쉽게생각해 main 함수 말고 특정 함수를 thread 로 만들어서 동시에 실행시키는 프로그램을 예로 들 수 있음

이때 만들어진 thread 를 thread1, thread2, thread3 등으로 부른다면, CPU 는 이러한 thread1 을 적당히 실행하고, 다시 thread2 도 적당히 실행하고, 또 thread3 도 적당히 실행 다시 thread1 을 실행하는 형식으로 동작하게 됨

그래서 이러한 이슈도 생길 수 있는데, 예를들어 고사양 게임을 실행한다 가정함, 그리고 여러 맵을 돌아다니며 로딩을 한다 할때, 이때 내부에선 thread1 은 맵을 로딩하고 thread2 는 배경음악을 재생한다고 볼 수 있음, 그래서 진짜 민감한 사람들이라면 배경음악이 조금 느려지거나 끊긴다고 느껴지는 사람도 있을 수 있음

thread1 을 집중적으로 실행하니 thread2 의 실행이 우선순위에서 밀려서 이렇게 느껴지는거임

사실 컴퓨터 과학에서 말하는 동시성이란건 실제로 동시에 실행하는것과는 다름

이걸 어떻게 구현하냐는건 하드웨어에 가까워지는 예기라서 사실 OS 에서 다루기엔 좀 벅찬 부분이긴 함

일단 결론적으로 말하면 싱글 스레드많을 지원하는 CPU 를 사용한다면, Process 가 Thread 를 얼마나 생성하든 결국 단일 thread 로 동작하게 됨, thread1 이 실행하면 thread2 는 대기하는 형식

반대로 멀티 스레드를 지원하는 CPU 를 사용한다면 이러한 실행 흐름을 동시에 실행할 수 있음, 요즘 나오는 CPU 들은 전부 멀티 스레드를 지원하긴 함

하드웨어에 관심있는 사람이라면 N코어 N스레드 어쩌구 를 많이 들어봤을거임, 코어는 실제 물리적인 CPU 도 스레드는 OS 에서 인식한 논리적인 CPU 라고 할 수 있음

그렇다면 스레드를 몇개까지 생성할수 있을까 하면, 사실 프로그래머 마음대로 생성할 수 있음, 하지만 하드웨어의 스레드는 한정적임

여기까지가 기본 개념임

더 나아가면 스레드 상태, Daemon, wait, join 등등 여러 개념이 있지만 여기서 다루진 않겠음